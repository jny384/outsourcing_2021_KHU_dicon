{"ast":null,"code":"import _slicedToArray from\"/Users/jeongnayeong/Desktop/2021_KHU_dicon_/outsourcing_2021_KHU_dicon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import storage from\"../firebase/firebase-manager\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadThumbNail(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progress=_useState6[0],setProgress=_useState6[1];var directory=props.directory;var teamName=props.teamName;var handleChange=function handleChange(e){if(e.target.files[0]){setImage(e.target.files[0]);}};// const handleChangeDirectory = (e) => {\n//     setDirectory(e.target.value);\n// }\nvar handleUpload=function handleUpload(){var uploadTask=storage.ref(\"images/\".concat(teamName,\"/\").concat(directory,\"/thumb/\").concat(image.name)).put(image);uploadTask.on(\"state_changed\",function(snapshot){var progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){console.log(error);},function(){storage.ref(\"images/\".concat(teamName,\"/\").concat(directory,\"/thumb\")).child(image.name).getDownloadURL().then(function(url){setUrl(url);console.log(\"url : \",url);props.getThumbUrl(url);});});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"progress\",{value:progress,max:\"100\"}),/*#__PURE__*/_jsx(\"br\",{}),props.getImgUrl,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Upload\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:url||\"http://via.placeholde.com/300\",alt:\"thumbNail\",style:{height:\"50px\"}}),/*#__PURE__*/_jsx(\"br\",{})]});}","map":{"version":3,"sources":["/Users/jeongnayeong/Desktop/2021_KHU_dicon_/outsourcing_2021_KHU_dicon/src/components/post/uploadThumbNail.js"],"names":["React","useState","storage","UploadThumbNail","props","image","setImage","url","setUrl","progress","setProgress","directory","teamName","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","getThumbUrl","getImgUrl","height"],"mappings":"6LAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,OAAP,KAAoB,8BAApB,C,6IAEA,cAAe,SAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,eACjBH,QAAQ,EADS,wCACpCI,KADoC,eAC7BC,QAD6B,8BAErBL,QAAQ,EAFa,yCAEpCM,GAFoC,eAE/BC,MAF+B,8BAGXP,QAAQ,CAAC,CAAD,CAHG,yCAGpCQ,QAHoC,eAG1BC,WAH0B,eAK3C,GAAMC,CAAAA,SAAS,CAAGP,KAAK,CAACO,SAAxB,CACA,GAAMC,CAAAA,QAAQ,CAAGR,KAAK,CAACQ,QAAvB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxB,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAJ,CAAuB,CACnBV,QAAQ,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR,CACH,CACJ,CAJD,CAMA;AACA;AACA;AAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAMC,CAAAA,UAAU,CAAGhB,OAAO,CAACiB,GAAR,kBAAsBP,QAAtB,aAAkCD,SAAlC,mBAAqDN,KAAK,CAACe,IAA3D,GAAmEC,GAAnE,CAAuEhB,KAAvE,CAAnB,CACAa,UAAU,CAACI,EAAX,CACI,eADJ,CAEI,SAAAC,QAAQ,CAAI,CACR,GAAMd,CAAAA,QAAQ,CAAGe,IAAI,CAACC,KAAL,CACZF,QAAQ,CAACG,gBAAT,CAA4BH,QAAQ,CAACI,UAAtC,CAAoD,GADvC,CAAjB,CAGAjB,WAAW,CAACD,QAAD,CAAX,CACH,CAPL,CAQI,SAAAmB,KAAK,CAAI,CACLC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAVL,CAWI,UAAM,CACF1B,OAAO,CACFiB,GADL,kBACmBP,QADnB,aAC+BD,SAD/B,YAEKoB,KAFL,CAEW1B,KAAK,CAACe,IAFjB,EAGKY,cAHL,GAIKC,IAJL,CAIU,SAAC1B,GAAD,CAAS,CACXC,MAAM,CAACD,GAAD,CAAN,CACAsB,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBvB,GAAtB,EACAH,KAAK,CAAC8B,WAAN,CAAkB3B,GAAlB,EACH,CARL,EASH,CArBL,EAuBH,CAzBD,CA2BA,mBACI,wCACI,iBAAU,KAAK,CAAEE,QAAjB,CAA2B,GAAG,CAAC,KAA/B,EADJ,cAEI,aAFJ,CAGKL,KAAK,CAAC+B,SAHX,cAKI,aALJ,cAMI,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,KAA3B,CAA4B,QAAQ,CAAEtB,YAAtC,EANJ,cAOI,eAAQ,OAAO,CAAEI,YAAjB,oBAPJ,cASI,aATJ,cAUI,YACI,GAAG,CAAEV,GAAG,EAAI,+BADhB,CAEI,GAAG,CAAC,WAFR,CAGI,KAAK,CAAE,CAAC6B,MAAM,CAAE,MAAT,CAHX,EAVJ,cAeI,aAfJ,GADJ,CAmBH","sourcesContent":["import React, {useState} from \"react\";\nimport storage from \"../firebase/firebase-manager\";\n\nexport default function UploadThumbNail(props) {\n    const [image, setImage] = useState();\n    const [url, setUrl] = useState();\n    const [progress, setProgress] = useState(0);\n\n    const directory = props.directory;\n    const teamName = props.teamName;\n\n    const handleChange = (e) => {\n        if (e.target.files[0]) {\n            setImage(e.target.files[0]);\n        }\n    };\n\n    // const handleChangeDirectory = (e) => {\n    //     setDirectory(e.target.value);\n    // }\n\n    const handleUpload = () => {\n        const uploadTask = storage.ref(`images/${teamName}/${directory}/thumb/${image.name}`).put(image);\n        uploadTask.on(\n            \"state_changed\",\n            snapshot => {\n                const progress = Math.round(\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                );\n                setProgress(progress);\n            },\n            error => {\n                console.log(error);\n            },\n            () => {\n                storage\n                    .ref(`images/${teamName}/${directory}/thumb`)\n                    .child(image.name)\n                    .getDownloadURL()\n                    .then((url) => {\n                        setUrl(url);\n                        console.log(\"url : \", url);\n                        props.getThumbUrl(url);\n                    })\n            }\n        );\n    }\n\n    return(\n        <>\n            <progress value={progress} max=\"100\"/>\n            <br/>\n            {props.getImgUrl}\n            {/*<input onChange={handleChangeDirectory} placeholder=\"저장 폴더 이름\"/>*/}\n            <br/>\n            <input type=\"file\" multiple onChange={handleChange}/>\n            <button onClick={handleUpload}>Upload</button>\n            {/*<a onClick={sendText}>send</a>*/}\n            <br/>\n            <img\n                src={url || \"http://via.placeholde.com/300\"}\n                alt=\"thumbNail\"\n                style={{height: \"50px\"}}\n            />\n            <br/>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}