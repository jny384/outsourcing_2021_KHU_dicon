{"ast":null,"code":"import _slicedToArray from\"/Users/jeongnayeong/Desktop/2021_KHU_dicon_/outsourcing_2021_KHU_dicon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import storage from\"../firebase/firebase-manager\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadBanner(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progress=_useState6[0],setProgress=_useState6[1];var handleChange=function handleChange(e){if(e.target.files[0]){setImage(e.target.files[0]);}};var handleUpload=function handleUpload(){var uploadTask=storage.ref(\"images/banner/\".concat(image.name)).put(image);uploadTask.on(\"state_changed\",function(snapshot){var progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){console.log(error);},function(){storage.ref(\"images/banner\").child(image.name).getDownloadURL().then(function(url){setUrl(url);console.log(\"url : \",url);props.getBannerUrl(url);// if (url != '') {GetProfileImage(url);}\n});});};// console.log(\"image : \", image);\n// console.log(\"url : \", url);\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"progress\",{value:progress,max:\"100\"}),/*#__PURE__*/_jsx(\"br\",{}),props.getBannerUrl,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Upload\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:url||\"http://via.placeholde.com/300\",alt:\"profile\",style:{height:\"50px\"}}),/*#__PURE__*/_jsx(\"br\",{})]});}","map":{"version":3,"sources":["/Users/jeongnayeong/Desktop/2021_KHU_dicon_/outsourcing_2021_KHU_dicon/src/components/post/uploadBanner.js"],"names":["React","useState","storage","UploadBanner","props","image","setImage","url","setUrl","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","getBannerUrl","height"],"mappings":"6LAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,MAAOC,CAAAA,OAAP,KAAoB,8BAApB,C,6IAEA,cAAe,SAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,eACdH,QAAQ,EADM,wCACjCI,KADiC,eAC1BC,QAD0B,8BAElBL,QAAQ,EAFU,yCAEjCM,GAFiC,eAE5BC,MAF4B,8BAGRP,QAAQ,CAAC,CAAD,CAHA,yCAGjCQ,QAHiC,eAGvBC,WAHuB,eAKxC,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxB,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAJ,CAAuB,CACnBR,QAAQ,CAACM,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR,CACH,CACJ,CAJD,CAMA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvB,GAAMC,CAAAA,UAAU,CAAGd,OAAO,CAACe,GAAR,yBAA6BZ,KAAK,CAACa,IAAnC,GAA2CC,GAA3C,CAA+Cd,KAA/C,CAAnB,CACAW,UAAU,CAACI,EAAX,CACI,eADJ,CAEI,SAAAC,QAAQ,CAAI,CACR,GAAMZ,CAAAA,QAAQ,CAAGa,IAAI,CAACC,KAAL,CACZF,QAAQ,CAACG,gBAAT,CAA4BH,QAAQ,CAACI,UAAtC,CAAoD,GADvC,CAAjB,CAGAf,WAAW,CAACD,QAAD,CAAX,CACH,CAPL,CAQI,SAAAiB,KAAK,CAAI,CACLC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAVL,CAWI,UAAM,CACFxB,OAAO,CACFe,GADL,kBAEKY,KAFL,CAEWxB,KAAK,CAACa,IAFjB,EAGKY,cAHL,GAIKC,IAJL,CAIU,SAACxB,GAAD,CAAS,CACXC,MAAM,CAACD,GAAD,CAAN,CACAoB,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBrB,GAAtB,EAEAH,KAAK,CAAC4B,YAAN,CAAmBzB,GAAnB,EACA;AACH,CAVL,EAWH,CAvBL,EAyBH,CA3BD,CA4BA;AACA;AAEA,mBACI,wCACI,iBAAU,KAAK,CAAEE,QAAjB,CAA2B,GAAG,CAAC,KAA/B,EADJ,cAEI,aAFJ,CAGKL,KAAK,CAAC4B,YAHX,cAKI,aALJ,cAMI,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAErB,YAA7B,EANJ,cAOI,eAAQ,OAAO,CAAEI,YAAjB,oBAPJ,cAQI,aARJ,cASI,YACI,GAAG,CAAER,GAAG,EAAI,+BADhB,CAEI,GAAG,CAAC,SAFR,CAGI,KAAK,CAAE,CAAC0B,MAAM,CAAE,MAAT,CAHX,EATJ,cAcI,aAdJ,GADJ,CAkBH","sourcesContent":["import React, {useState} from \"react\";\nimport storage from \"../firebase/firebase-manager\";\n\nexport default function UploadBanner(props) {\n    const [image, setImage] = useState();\n    const [url, setUrl] = useState();\n    const [progress, setProgress] = useState(0);\n\n    const handleChange = (e) => {\n        if (e.target.files[0]) {\n            setImage(e.target.files[0]);\n        }\n    };\n\n    const handleUpload = () => {\n        const uploadTask = storage.ref(`images/banner/${image.name}`).put(image);\n        uploadTask.on(\n            \"state_changed\",\n            snapshot => {\n                const progress = Math.round(\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n                );\n                setProgress(progress);\n            },\n            error => {\n                console.log(error);\n            },\n            () => {\n                storage\n                    .ref(`images/banner`)\n                    .child(image.name)\n                    .getDownloadURL()\n                    .then((url) => {\n                        setUrl(url);\n                        console.log(\"url : \", url);\n\n                        props.getBannerUrl(url);\n                        // if (url != '') {GetProfileImage(url);}\n                    })\n            }\n        );\n    }\n    // console.log(\"image : \", image);\n    // console.log(\"url : \", url);\n\n    return(\n        <>\n            <progress value={progress} max=\"100\"/>\n            <br/>\n            {props.getBannerUrl}\n            {/*<input onChange={handleChangeDirectory} placeholder=\"저장 폴더 이름\"/>*/}\n            <br/>\n            <input type=\"file\" onChange={handleChange}/>\n            <button onClick={handleUpload}>Upload</button>\n            <br/>\n            <img\n                src={url || \"http://via.placeholde.com/300\"}\n                alt=\"profile\"\n                style={{height: \"50px\"}}\n            />\n            <br/>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}